# BAUX tmux master config v0.2.1 — no external deps, works everywhere
set -g prefix C-a
unbind C-b
bind C-a send-prefix

set -g history-limit 50000
set -g mouse on
set -g base-index 1
setw -g pane-base-index 1
set -g renumber-windows on
set -g escape-time 0
set -g status-interval 5
set -g status on
set -g status-position top

# Left: BAUX on hostname
set -g status-left "#[fg=cyan,bold] BAUX on #H #[default] "

# Window list (center)
setw -g window-status-format " #I:#W#{?window_activity_flag,*, } "
setw -g window-status-current-format " #I:#W#{?window_zoomed_flag,Z,}* "
setw -g window-status-current-style fg=brightwhite,bold
setw -g window-status-style fg=cyan

# Right: battery (only when on battery) + day + time
set -g status-right "#[fg=yellow]#{?battery_percentage,#{battery_percentage}%% ,}#(date '+%a %H:%M')"

# Detect truecolor → go full bling
if-shell 'test -n "$COLORTERM" || echo "$TERM" | grep -q "256color\|24bit"' {
    set -g status-style bg=#1e1e2e,fg=#cdd6f4
    set -g status-left "#[fg=#1e1e2e,bg=#f5c2e7,bold] BAUX on #H #[default] "
    setw -g window-status-current-style bg=#89b4fa,fg=#1e1e2e,bold
    set -g status-right "#[fg=#a6e3a1]#{?battery_percentage,#{battery_percentage}%% ,}#(date '+%a %H:%M')"
}

# User overrides last
if-shell '[ -f /etc/baux/tmux.local.conf ]' 'source-file /etc/baux/tmux.local.conf'
